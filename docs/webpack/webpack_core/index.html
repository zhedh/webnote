
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Webpack 核心 · WebNote</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 5.1.4">
        <meta name="author" content="zhedh">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../webpack_module/" />
    
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Http
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../http/http_base.html">
            
                <a href="../../http/http_base.html">
            
                    
                    Http 知识整理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    React 基础
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../react/react_core/">
            
                <a href="../../react/react_core/">
            
                    
                    React 核心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../react/react_component/">
            
                <a href="../../react/react_component/">
            
                    
                    React 组件化开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../react/react_state/">
            
                <a href="../../react/react_state/">
            
                    
                    React 状态管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../react/react_communication/">
            
                <a href="../../react/react_communication/">
            
                    
                    React 组件通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../react/react_hoc/">
            
                <a href="../../react/react_hoc/">
            
                    
                    React 高阶组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../react/react_controlled/">
            
                <a href="../../react/react_controlled/">
            
                    
                    React 受控组件与非受控组件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    React 进阶
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../react/react_fiber/">
            
                <a href="../../react/react_fiber/">
            
                    
                    React Fiber 架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../react/react_fiber_tree/">
            
                <a href="../../react/react_fiber_tree/">
            
                    
                    React 双缓冲机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../react/react_base.html">
            
                <a href="../../react/react_base.html">
            
                    
                    React Diff 算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../react/react_base.html">
            
                <a href="../../react/react_base.html">
            
                    
                    React 单向数据流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../react/react_base.html">
            
                <a href="../../react/react_base.html">
            
                    
                    React 虚拟 DOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../../react/react_base.html">
            
                <a href="../../react/react_base.html">
            
                    
                    React Hooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Webpack
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.5.1" data-path="./">
            
                <a href="./">
            
                    
                    Webpack 核心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../webpack_module/">
            
                <a href="../webpack_module/">
            
                    
                    Webpack 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../webpack_compile/">
            
                <a href="../webpack_compile/">
            
                    
                    Webpack 编译原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    微信小程序
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <span>
            
                    
                    音视频通话
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../../applet/chat/vga/">
            
                <a href="../../applet/chat/vga/">
            
                    
                    双人音视频通话
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Webpack 核心</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="webpack-核心概念">Webpack 核心概念</h1>
<p>webpack 是一个用于现代 JavaScript 应用程序的静态模块打包工具。当 webpack 处理应用程序时，它会在内部从一个或多个入口点构建一个 依赖图(dependency graph)，然后将你项目中所需的每一个模块组合成一个或多个 bundles，它们均为静态资源，用于展示你的内容。</p>
<p>webpack 核心概念包含一下几点：</p>
<ul>
<li>entry（入口）</li>
<li>output（输出）</li>
<li>loader（加载器）</li>
<li>plugin（插件）</li>
<li>mode（模式）</li>
<li>browser compatibility（浏览器兼容性）</li>
<li>environment（环境）</li>
</ul>
<h2 id="entry（入口起点）">entry（入口起点）</h2>
<p>entry（入口）配置属性支持多种类型：</p>
<ul>
<li><strong>字符串</strong>：表示单个入口文件的路径。</li>
<li><strong>数组</strong>：表示多个入口文件。</li>
<li><strong>对象</strong>：可以包含多个入口点，每个入口点都有自己的键和值。</li>
<li><strong>对象形式的高级用法</strong>：支持更复杂的结构，例如嵌套对象或函数。</li>
</ul>
<h3 id="基础配置">基础配置</h3>
<h4 id="字符串配置">字符串配置</h4>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&apos;./path/to/my/entry/file.js&apos;</span>,
}
</code></pre>
<h4 id="数组配置">数组配置</h4>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: [<span class="hljs-string">&apos;./src/file_1.js&apos;</span>, <span class="hljs-string">&apos;./src/file_2.js&apos;</span>],
}
</code></pre>
<h4 id="对象配置">对象配置</h4>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
    <span class="hljs-attr">adminApp</span>: <span class="hljs-string">&apos;./src/adminApp.js&apos;</span>,
  },
}
</code></pre>
<h3 id="高级配置">高级配置</h3>
<h4 id="函数配置">函数配置</h4>
<p><strong>动态入口</strong></p>
<p>app 入口点的路径是通过一个函数动态返回的，根据不同的条件或环境变量来确定实际的入口文件。</p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// 动态决定入口文件</span>
      <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&apos;src&apos;</span>, <span class="hljs-string">&apos;app.js&apos;</span>)
    },
    <span class="hljs-comment">// ...</span>
  },
}
</code></pre>
<p><strong>异步加载模块</strong></p>
<p>asyncModules 入口点使用了动态 import 语法，允许模块异步加载。</p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
    <span class="hljs-attr">styles</span>: <span class="hljs-string">&apos;./src/styles.css&apos;</span>,
    <span class="hljs-comment">// 异步加载模块</span>
    <span class="hljs-attr">asyncModules</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;./src/asyncModules.js&apos;</span>),
  },
}
</code></pre>
<p><strong>条件性入口</strong></p>
<p>conditional 入口点根据环境变量 SOME_FLAG 的值来决定是否包含入口文件。</p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
    <span class="hljs-attr">styles</span>: <span class="hljs-string">&apos;./src/styles.css&apos;</span>,
    <span class="hljs-comment">// 异步加载模块</span>
    <span class="hljs-attr">asyncModules</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&apos;./src/asyncModules.js&apos;</span>),
  },
}
</code></pre>
<h4 id="对象属性配置">对象属性配置</h4>
<p>对象配置属性：</p>
<ul>
<li>import：启动时需加载的模块。</li>
<li>dependOn：当前入口所依赖的入口。它们必须在该入口被加载前被加载。</li>
<li>alias：入口别名。为入口点指定别名，这可以在其他地方引用该入口时使用。</li>
<li>priority：入口优先级。值越大优先级越高，webpack 先加载优先级高的模块。</li>
<li>plugins：入口插件。为入口指定所需要的插件。</li>
<li>runtime：运行时 chunk 的名字。如果设置了，就会创建一个新的运行时 chunk。在 webpack 5.43.0 之后可将其设为 false 以避免一个新的运行时 chunk。</li>
</ul>
<p>配置参考示例：</p>
<p><strong>共享依赖入口</strong></p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: {
      <span class="hljs-attr">import</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&apos;shared&apos;</span>,
    },
    <span class="hljs-attr">shared</span>: <span class="hljs-string">&apos;lodash&apos;</span>,
  },
}
</code></pre>
<p><strong>分离第三方库</strong></p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
    <span class="hljs-attr">vendor</span>: [<span class="hljs-string">&apos;react&apos;</span>, <span class="hljs-string">&apos;react-dom&apos;</span>],
  },
}
</code></pre>
<p><strong>入口别名</strong></p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: {
      <span class="hljs-attr">import</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
      <span class="hljs-comment">// 为入口指定别名</span>
      <span class="hljs-attr">alias</span>: <span class="hljs-string">&apos;main-app&apos;</span>,
    },
  },
}
</code></pre>
<p><strong>入口优先级</strong></p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: {
      <span class="hljs-attr">import</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
      <span class="hljs-comment">// 设置入口的优先级</span>
      <span class="hljs-attr">priority</span>: <span class="hljs-number">10</span>,
    },
    <span class="hljs-attr">other</span>: {
      <span class="hljs-attr">import</span>: <span class="hljs-string">&apos;./src/other.js&apos;</span>,
      <span class="hljs-attr">priority</span>: <span class="hljs-number">5</span>,
    },
  },
}
</code></pre>
<p><strong>入口插件</strong></p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: {
    <span class="hljs-attr">app</span>: {
      <span class="hljs-attr">import</span>: <span class="hljs-string">&apos;./src/app.js&apos;</span>,
      <span class="hljs-comment">// 为入口指定插件</span>
      <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyCustomPlugin</span>()],
    },
  },
}
</code></pre>
<h2 id="output（输出）">output（输出）</h2>
<p>可以通过配置 output 选项，告知 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个 entry 起点，但只能指定一个 output 配置。</p>
<h3 id="常用配置属性说明">常用配置属性说明</h3>
<ul>
<li>filename：指定输出文件的名称。</li>
<li>path：指定输入文件的目录，必须是绝对路径。</li>
<li>publicPath：指定资源的公共路径，即在 HTML 文件中引用这些资源时的路径。</li>
<li>chunkFilename：指定额外的 chunk 文件的名称模板。通常用于代码分割时生成的文件。</li>
<li>library：当使用 output.library 时，Webpack 会导出一个全局变量，该变量可以被浏览器脚本访问。</li>
<li>libraryTarget：指定库的目标类型。例如，var 会将库导出为全局变量。</li>
<li>clean：设置为 true 时，Webpack 会在每次构建前清理输出目录。</li>
<li>crossOriginLoading：设置跨域加载的行为。例如，设置为 anonymous 时，资源将以匿名方式加载。</li>
<li>devtoolModuleFilenameTemplate：当使用 source map 时，此选项允许自定义源文件的路径。</li>
<li>globalObject：指定全局对象的名称，通常用于 Node.js 环境。</li>
</ul>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">output</span>: {
    <span class="hljs-comment">// [name]占位符，它会被替换为入口点的名称</span>
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;[name].bundle.js&apos;</span>,

    <span class="hljs-comment">// 指定输出文件的目录</span>
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&apos;dist&apos;</span>),

    <span class="hljs-comment">// 指定资源公众路径</span>
    <span class="hljs-attr">publicPath</span>: <span class="hljs-string">&apos;/assets/&apos;</span>,

    <span class="hljs-comment">// 指定额外的chunk文件的名称</span>
    <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">&apos;[id].chunk.js&apos;</span>,

    <span class="hljs-comment">// 指定JS导出的包的全局变量，打包库、框架时使用</span>
    <span class="hljs-attr">library</span>: <span class="hljs-string">&apos;MyLibrary&apos;</span>,

    <span class="hljs-comment">// 指定库的目标类型，打包库、框架时使用</span>
    <span class="hljs-attr">libraryTarget</span>: <span class="hljs-string">&apos;var&apos;</span>,

    <span class="hljs-comment">// 设置为anonymous时，资源将以匿名方式加载。</span>
    <span class="hljs-attr">crossOriginLoading</span>: <span class="hljs-string">&apos;anonymous&apos;</span>,

    <span class="hljs-comment">// 指定全局对象的名称，通常用于Node.js环境。</span>
    <span class="hljs-attr">globalObject</span>: <span class="hljs-string">&apos;this&apos;</span>,
  },
}
</code></pre>
<h2 id="loader（加载器）">loader（加载器）</h2>
<p>loader 用于对模块的源代码进行转换。loader 可以使你在 import 或 &quot;load(加载)&quot; 模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的得力方式。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 import CSS 文件！</p>
<h3 id="loader-使用">loader 使用</h3>
<p>应用程序中，有两种使用 loader 的方式：</p>
<ul>
<li>配置方式（推荐）：在 webpack.config.js 文件中指定 loader。</li>
<li>内联方式：在每个 import 语句中显式指定 loader。</li>
</ul>
<h4 id="配置方式使用-loader">配置方式使用 loader</h4>
<p>module.rules 允许你在 webpack 配置中指定多个 loader。 这种方式是展示 loader 的一种简明方式，并且有助于使代码变得简洁和易于维护。</p>
<p>注意：loader 在配置中从下到上（或从右到左）取值执行；下面的示例中从 sass-loader 开始执行，然后继续执行 css-loader，最后以 style-loader 为结束。</p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
        <span class="hljs-attr">use</span>: [
          { <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;style-loader&apos;</span> },
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;css-loader&apos;</span>,
            <span class="hljs-attr">options</span>: {
              <span class="hljs-attr">modules</span>: <span class="hljs-literal">true</span>,
            },
          },
          { <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;sass-loader&apos;</span> },
        ],
      },
    ],
  },
}
</code></pre>
<h4 id="内联方式使用-loader">内联方式使用 loader</h4>
<p>不推荐使用，不展示讲解</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Styles</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;style-loader!css-loader?modules!./styles.css&apos;</span>
</code></pre>
<h3 id="loader-工作原理">loader 工作原理</h3>
<p>Loaders 本质上是 Node.js 模块，它们接收源文件的内容作为输入，并返回转换后的结果。这个过程可以通过同步或异步的方式完成。Loaders 可以链式调用，每个 Loader 处理特定的转换任务，最终将源文件转换为 JavaScript 模块。</p>
<h3 id="loader-特性">loader 特性</h3>
<ul>
<li>loader 支持链式调用。链中的每个 loader 会将转换应用在已处理过的资源上。一组链式的 loader 将按照相反的顺序执行。链中的第一个 loader 将其结果（也就是应用过转换后的资源）传递给下一个 loader，依此类推。最后，链中的最后一个 loader，返回 webpack 所期望的 JavaScript。</li>
<li>loader 可以是同步的，也可以是异步的。</li>
<li>loader 运行在 Node.js 中，并且能够执行任何操作。</li>
<li>loader 可以通过 options 对象配置（仍然支持使用 query 参数来设置选项，但是这种方式已被废弃）。</li>
<li>除了常见的通过 package.json 的 main 来将一个 npm 模块导出为 loader，还可以在 module.rules 中使用 loader 字段直接引用一个模块。</li>
<li>插件(plugin)可以为 loader 带来更多特性。</li>
<li>loader 能够产生额外的任意文件。</li>
</ul>
<h2 id="plugin（插件）">plugin（插件）</h2>
<p>Webpack Plugins 是 Webpack 构建系统中的扩展点，它们可以在构建过程中执行各种任务，如打包优化、资源管理和环境变量注入等。</p>
<p>插件目的在于解决 loader 无法实现的其他事。</p>
<h3 id="插件剖析">插件剖析</h3>
<p>webpack 插件是一个具有 apply 方法的 JavaScript 对象。apply 方法会被 webpack compiler 调用，并且在 整个 编译生命周期都可以访问 compiler 对象。</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> pluginName = <span class="hljs-string">&apos;TestWebpackPlugin&apos;</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWebpackPlugin</span> {
  config = {}

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
  }

  <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
    compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">run</span>.<span class="hljs-title function_">tap</span>(pluginName, <span class="hljs-function">(<span class="hljs-params">compilation</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&apos;webpack 构建正在启动！&apos;</span>)
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&apos;参数：&apos;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>)
    })
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">TestWebpackPlugin</span>
</code></pre>
<h3 id="插件使用">插件使用</h3>
<p>由于插件可以携带参数/选项，你必须在 webpack 配置中，向 plugins 属性传入一个 new 实例。</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;html-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>) <span class="hljs-comment">// 访问内置的插件</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&apos;./path/to/my/entry/file.js&apos;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;my-first-webpack.bundle.js&apos;</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&apos;dist&apos;</span>),
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|jsx)$/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">&apos;babel-loader&apos;</span>,
      },
    ],
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">ProgressPlugin</span>(),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-attr">template</span>: <span class="hljs-string">&apos;./src/index.html&apos;</span> }),
  ],
}
</code></pre>
<p>示例中：ProgressPlugin 用于自定义编译过程中的进度报告，HtmlWebpackPlugin 将生成一个 HTML 文件，并在其中使用 script 引入一个名为 my-first-webpack.bundle.js 的 JS 文件。</p>
<h3 id="常用插件">常用插件</h3>
<ul>
<li>HtmlWebpackPlugin：自动生成 HTML 文件，并将打包后的 JavaScript 文件注入到这些 HTML 文件中。</li>
<li>MiniCssExtractPlugin：将 CSS 提取到单独的文件中，而不是在 JavaScript 中以 <style\> 标签的形式存在。</style\></li>
<li>UglifyJsPlugin：压缩 JavaScript 文件，移除无用的代码，减少文件大小。</li>
<li>TerserPlugin：替代 UglifyJsPlugin 的压缩工具，提供更好的压缩效果和性能。</li>
<li>DefinePlugin：允许创建预定义的全局常量，这些常量可以在编译时被替换。</li>
<li>CopyWebpackPlugin：复制单个文件或整个目录到构建目录。</li>
<li>CleanWebpackPlugin：在每次构建之前清除输出目录。</li>
<li>ProgressPlugin：显示构建进度。</li>
<li>HotModuleReplacementPlugin：启用模块热替换（HMR），允许在不刷新页面的情况下更新模块。</li>
</ul>
<h2 id="mode（模式）">mode（模式）</h2>
<p>提供 mode 配置选项，告知 webpack 使用相应模式的内置优化。</p>
<blockquote>
<p>string = &apos;production&apos;: &apos;none&apos; | &apos;development&apos; | &apos;production&apos;</p>
</blockquote>
<h3 id="用法">用法</h3>
<p>配置形式：</p>
<pre><code class="lang-js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">&apos;development&apos;</span>,
}
</code></pre>
<p>命令形式：</p>
<pre><code class="lang-bash">webpack --mode=development
</code></pre>
<h3 id="参数选项说明">参数选项说明</h3>
<ul>
<li>development: 开发模式，启用快速反馈循环和优化的开发体验。</li>
<li>production: 生产模式，启用最佳实践的生产构建，包括代码分割、压缩和其他优化措施。</li>
<li>none: 不设置任何模式，Webpack 将不会应用任何与模式相关的优化。</li>
</ul>
<p>如果不设置 mode，Webpack 会默认使用 production 模式。然而，为了确保正确的优化和警告信息，建议显式设置 mode。</p>
<h2 id="browser-compatibility（浏览器兼容性）">browser compatibility（浏览器兼容性）</h2>
<p>Webpack 支持所有符合 ES5 标准 的浏览器（不支持 IE8 及以下版本）。webpack 的 import() 和 require.ensure() 需要 Promise。如果你想要支持旧版本浏览器，在使用这些表达式之前，还需要 提前加载 polyfill。</p>
<h2 id="environment（环境）">environment（环境）</h2>
<p>Webpack 5 运行于 Node.js v10.13.0+ 的版本。</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="../webpack_module/" class="navigation navigation-next navigation-unique" aria-label="Next page: Webpack 模块">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Webpack 核心","level":"1.5.1","depth":2,"next":{"title":"Webpack 模块","level":"1.5.2","depth":2,"path":"webpack/webpack_module/index.md","ref":"webpack/webpack_module/index.md","articles":[]},"previous":{"title":"Webpack","level":"1.5","depth":1,"ref":"","articles":[{"title":"Webpack 核心","level":"1.5.1","depth":2,"path":"webpack/webpack_core/index.md","ref":"webpack/webpack_core/index.md","articles":[]},{"title":"Webpack 模块","level":"1.5.2","depth":2,"path":"webpack/webpack_module/index.md","ref":"webpack/webpack_module/index.md","articles":[]},{"title":"Webpack 编译原理","level":"1.5.3","depth":2,"path":"webpack/webpack_compile/index.md","ref":"webpack/webpack_compile/index.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"root":"./src","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"zhedh","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"WebNote","gitbook":"*"},"file":{"path":"webpack/webpack_core/index.md","mtime":"2024-10-10T08:01:42.047Z","type":"markdown"},"gitbook":{"version":"5.1.4","time":"2024-10-12T06:01:54.630Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

